<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RAVE: /github/workspace/librave/scansun/scansun.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RAVE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2c51bd224d5901c5840398c25b83fd53.html">librave</a></li><li class="navelem"><a class="el" href="dir_1ece725e010d4bb1660222b7f3b33328.html">scansun</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">scansun.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>KNMI's sun scanning functionality.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="scansun_8h_source.html">scansun.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1e38c5b5497eb55bae61e3b0546bbcb2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#a1e38c5b5497eb55bae61e3b0546bbcb2">getDoubleAttribute</a> (<a class="el" href="rave__object_8h.html#a46a2f0574ec46db3626c123be570c7ed">RaveCoreObject</a> *obj, const char *aname, double *tmpd)</td></tr>
<tr class="memdesc:a1e38c5b5497eb55bae61e3b0546bbcb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a double attribute value from any polar object type.  <a href="scansun_8c.html#a1e38c5b5497eb55bae61e3b0546bbcb2">More...</a><br /></td></tr>
<tr class="separator:a1e38c5b5497eb55bae61e3b0546bbcb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a043efe5492a1bea35941d220a09b93cf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#a043efe5492a1bea35941d220a09b93cf">getDoubleArrayAttribute</a> (<a class="el" href="polarscan_8h.html#ab18af0ebcfc65c3148c7e8bee5455c57">PolarScan_t</a> *scan, const char *aname, double **array, <a class="el" href="polarscanparam_8h.html#aaf44d7db9941f6f7e9a9116fcb28e8dd">PolarScanParam_t</a> *param)</td></tr>
<tr class="memdesc:a043efe5492a1bea35941d220a09b93cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a double attribute array from a polar scan object.  <a href="scansun_8c.html#a043efe5492a1bea35941d220a09b93cf">More...</a><br /></td></tr>
<tr class="separator:a043efe5492a1bea35941d220a09b93cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1f284811c349cff6ac641735085d524"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#ad1f284811c349cff6ac641735085d524">fill_toplevelmeta</a> (<a class="el" href="rave__object_8h.html#a46a2f0574ec46db3626c123be570c7ed">RaveCoreObject</a> *object, <a class="el" href="structscanmeta.html">SCANMETA</a> *meta)</td></tr>
<tr class="memdesc:ad1f284811c349cff6ac641735085d524"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads metadata into the SCANMETA structure from top-level object, whether it be volume or scan, where required metadata are located in top-level 'how'.  <a href="scansun_8c.html#ad1f284811c349cff6ac641735085d524">More...</a><br /></td></tr>
<tr class="separator:ad1f284811c349cff6ac641735085d524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb38211287989675d73543f150761e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#a0bb38211287989675d73543f150761e1">fill_meta</a> (<a class="el" href="polarscan_8h.html#ab18af0ebcfc65c3148c7e8bee5455c57">PolarScan_t</a> *scan, <a class="el" href="polarscanparam_8h.html#aaf44d7db9941f6f7e9a9116fcb28e8dd">PolarScanParam_t</a> *param, <a class="el" href="structscanmeta.html">SCANMETA</a> *meta)</td></tr>
<tr class="memdesc:a0bb38211287989675d73543f150761e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads metadata into the SCANMETA structure from volume, scan, param.  <a href="scansun_8c.html#a0bb38211287989675d73543f150761e1">More...</a><br /></td></tr>
<tr class="separator:a0bb38211287989675d73543f150761e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfbe94449a7fc099483261f6bbc399ad"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#acfbe94449a7fc099483261f6bbc399ad">ElevHeig2Rang</a> (double elev, float heig)</td></tr>
<tr class="memdesc:acfbe94449a7fc099483261f6bbc399ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calculates the height and range from the Radar corresponding to a point with a known elevation and on-ground distance from the Radar.  <a href="scansun_8c.html#acfbe94449a7fc099483261f6bbc399ad">More...</a><br /></td></tr>
<tr class="separator:acfbe94449a7fc099483261f6bbc399ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c7896af256fbb915c5f113abac1e93a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#a8c7896af256fbb915c5f113abac1e93a">datetime</a> (long date1, long time1, long ss, long *date2, long *time2)</td></tr>
<tr class="memdesc:a8c7896af256fbb915c5f113abac1e93a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns the date/time of (date1,time1) and 'ss' later.  <a href="scansun_8c.html#a8c7896af256fbb915c5f113abac1e93a">More...</a><br /></td></tr>
<tr class="separator:a8c7896af256fbb915c5f113abac1e93a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a470b27523245f3e8871329cbe6564a2d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#a470b27523245f3e8871329cbe6564a2d">refraction</a> (double *elev)</td></tr>
<tr class="memdesc:a470b27523245f3e8871329cbe6564a2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calculates the refraction correction of the solar position.  <a href="scansun_8c.html#a470b27523245f3e8871329cbe6564a2d">More...</a><br /></td></tr>
<tr class="separator:a470b27523245f3e8871329cbe6564a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53ae63e812912af188f8622d33659bf6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#a53ae63e812912af188f8622d33659bf6">solar_elev_azim</a> (double lon, double lat, long yyyymmdd, long hhmmss, double *elev, double *azim, double *relev)</td></tr>
<tr class="memdesc:a53ae63e812912af188f8622d33659bf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calculates the solar elevation and azimuth using the geographical position, date, and time.  <a href="scansun_8c.html#a53ae63e812912af188f8622d33659bf6">More...</a><br /></td></tr>
<tr class="separator:a53ae63e812912af188f8622d33659bf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc0fc55f583587489b2723224c055442"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#afc0fc55f583587489b2723224c055442">readoutTiming</a> (<a class="el" href="structscanmeta.html">SCANMETA</a> *meta, int ia, long *date, long *time, double *timer)</td></tr>
<tr class="memdesc:afc0fc55f583587489b2723224c055442"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the exact observation times based on acquired readout times for each ray.  <a href="scansun_8c.html#afc0fc55f583587489b2723224c055442">More...</a><br /></td></tr>
<tr class="separator:afc0fc55f583587489b2723224c055442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5182dab0f50920d99681c685690e2b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#aa5182dab0f50920d99681c685690e2b3">processData</a> (<a class="el" href="polarscan_8h.html#ab18af0ebcfc65c3148c7e8bee5455c57">PolarScan_t</a> *scan, <a class="el" href="structscanmeta.html">SCANMETA</a> *meta, <a class="el" href="rave__list_8h.html#ad2ea2f1cc27c63aa76beb80b6535c3ef">RaveList_t</a> *list)</td></tr>
<tr class="memdesc:aa5182dab0f50920d99681c685690e2b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds sun hits in reflectivity data.  <a href="scansun_8c.html#aa5182dab0f50920d99681c685690e2b3">More...</a><br /></td></tr>
<tr class="separator:aa5182dab0f50920d99681c685690e2b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21ed740df778c0256356b6f1e0309a63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#a21ed740df778c0256356b6f1e0309a63">outputMeta</a> (<a class="el" href="structscanmeta.html">SCANMETA</a> *meta)</td></tr>
<tr class="memdesc:a21ed740df778c0256356b6f1e0309a63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug function that writes metadata to file.  <a href="scansun_8c.html#a21ed740df778c0256356b6f1e0309a63">More...</a><br /></td></tr>
<tr class="separator:a21ed740df778c0256356b6f1e0309a63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32a49eb2347cfc9100baaebd794d49ab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#a32a49eb2347cfc9100baaebd794d49ab">processScan</a> (<a class="el" href="polarscan_8h.html#ab18af0ebcfc65c3148c7e8bee5455c57">PolarScan_t</a> *scan, <a class="el" href="structscanmeta.html">SCANMETA</a> *meta, <a class="el" href="rave__list_8h.html#ad2ea2f1cc27c63aa76beb80b6535c3ef">RaveList_t</a> *list)</td></tr>
<tr class="memdesc:a32a49eb2347cfc9100baaebd794d49ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function that calls processReflectivity for each of a number of given parameters/quantities.  <a href="scansun_8c.html#a32a49eb2347cfc9100baaebd794d49ab">More...</a><br /></td></tr>
<tr class="separator:a32a49eb2347cfc9100baaebd794d49ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd3f204ec616efd7510934a65d357a50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#acd3f204ec616efd7510934a65d357a50">scansunFromObject</a> (<a class="el" href="rave__object_8h.html#a46a2f0574ec46db3626c123be570c7ed">RaveCoreObject</a> *object, <a class="el" href="rave__types_8h.html#a9781de85deb77d68fc1a87c07220b716">Rave_ObjectType</a> ot, <a class="el" href="rave__list_8h.html#ad2ea2f1cc27c63aa76beb80b6535c3ef">RaveList_t</a> *list, char **source)</td></tr>
<tr class="memdesc:acd3f204ec616efd7510934a65d357a50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Masterminds the scanning of polar data and determination of sun hits, from object in memory.  <a href="scansun_8c.html#acd3f204ec616efd7510934a65d357a50">More...</a><br /></td></tr>
<tr class="separator:acd3f204ec616efd7510934a65d357a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfc20bea77102fec923dae03d2e3d077"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scansun_8c.html#acfc20bea77102fec923dae03d2e3d077">scansun</a> (const char *filename, <a class="el" href="rave__list_8h.html#ad2ea2f1cc27c63aa76beb80b6535c3ef">RaveList_t</a> *list, char **source)</td></tr>
<tr class="memdesc:acfc20bea77102fec923dae03d2e3d077"><td class="mdescLeft">&#160;</td><td class="mdescRight">Masterminds the scanning of polar data and determination of sun hits.  <a href="scansun_8c.html#acfc20bea77102fec923dae03d2e3d077">More...</a><br /></td></tr>
<tr class="separator:acfc20bea77102fec923dae03d2e3d077"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >KNMI's sun scanning functionality. </p>
<dl class="section author"><dt>Author</dt><dd>Original algorithm and code: Iwan Holleman, KNMI, and Integration: Daniel Michelson, SMHI </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2010-10-29 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a8c7896af256fbb915c5f113abac1e93a" name="a8c7896af256fbb915c5f113abac1e93a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c7896af256fbb915c5f113abac1e93a">&#9670;&nbsp;</a></span>datetime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void datetime </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>date1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>time1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>ss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>date2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>time2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns the date/time of (date1,time1) and 'ss' later. </p>
<p >The date should be given in yyyymmhh format and the time in hhmmss format. The time lapse between the input and output date/time is given in seconds. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">date1</td><td>- long int of the input date </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">time1</td><td>- long int of the input time </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">date2</td><td>- long int of the output date </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">time2</td><td>- long int of the output time </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing </dd></dl>

</div>
</div>
<a id="acfbe94449a7fc099483261f6bbc399ad" name="acfbe94449a7fc099483261f6bbc399ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfbe94449a7fc099483261f6bbc399ad">&#9670;&nbsp;</a></span>ElevHeig2Rang()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double ElevHeig2Rang </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>elev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>heig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function calculates the height and range from the Radar corresponding to a point with a known elevation and on-ground distance from the Radar. </p>
<p >The formulae used are exact. For details see lab book. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">elev</td><td>- Elevation angle as a double </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">heig</td><td>- Height (above the radar) in meters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Range from the radar in meters, as a double </dd></dl>

</div>
</div>
<a id="a0bb38211287989675d73543f150761e1" name="a0bb38211287989675d73543f150761e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bb38211287989675d73543f150761e1">&#9670;&nbsp;</a></span>fill_meta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fill_meta </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="polarscan_8h.html#ab18af0ebcfc65c3148c7e8bee5455c57">PolarScan_t</a> *&#160;</td>
          <td class="paramname"><em>scan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="polarscanparam_8h.html#aaf44d7db9941f6f7e9a9116fcb28e8dd">PolarScanParam_t</a> *&#160;</td>
          <td class="paramname"><em>dbzh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structscanmeta.html">SCANMETA</a> *&#160;</td>
          <td class="paramname"><em>meta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads metadata into the SCANMETA structure from volume, scan, param. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">scan</td><td>- PolarScan_t object containing the sweep </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dbzh</td><td>- PolarScanParam_t object containing the sweep's parameter </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">meta</td><td>- SCANMETA struct that will be filled with metadata </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad1f284811c349cff6ac641735085d524" name="ad1f284811c349cff6ac641735085d524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1f284811c349cff6ac641735085d524">&#9670;&nbsp;</a></span>fill_toplevelmeta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fill_toplevelmeta </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rave__object_8h.html#a46a2f0574ec46db3626c123be570c7ed">RaveCoreObject</a> *&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structscanmeta.html">SCANMETA</a> *&#160;</td>
          <td class="paramname"><em>meta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads metadata into the SCANMETA structure from top-level object, whether it be volume or scan, where required metadata are located in top-level 'how'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">object</td><td>- RaveCoreObject containing either volume or scan </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">meta</td><td>- SCANMETA struct that will be filled with metadata </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a043efe5492a1bea35941d220a09b93cf" name="a043efe5492a1bea35941d220a09b93cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a043efe5492a1bea35941d220a09b93cf">&#9670;&nbsp;</a></span>getDoubleArrayAttribute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getDoubleArrayAttribute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="polarscan_8h.html#ab18af0ebcfc65c3148c7e8bee5455c57">PolarScan_t</a> *&#160;</td>
          <td class="paramname"><em>scan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>aname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double **&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="polarscanparam_8h.html#aaf44d7db9941f6f7e9a9116fcb28e8dd">PolarScanParam_t</a> *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a double attribute array from a polar scan object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>- a polar scan </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aname</td><td>- a string of the attribute to retrieve </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">array</td><td>- the double array to retrieve </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">param</td><td>- if attribute not found in scan, try this parameter. May be NULL and in that case, only scan will be checked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success or 0 if the attribute doesn't exist </dd></dl>

</div>
</div>
<a id="a1e38c5b5497eb55bae61e3b0546bbcb2" name="a1e38c5b5497eb55bae61e3b0546bbcb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e38c5b5497eb55bae61e3b0546bbcb2">&#9670;&nbsp;</a></span>getDoubleAttribute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getDoubleAttribute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rave__object_8h.html#a46a2f0574ec46db3626c123be570c7ed">RaveCoreObject</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>aname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>tmpd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a double attribute value from any polar object type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>- a polar volume, scan, or scan parameter </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aname</td><td>- a string of the attribute to retrieve </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tmpd</td><td>- the double value to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success or 0 if the attribute doesn't exist </dd></dl>

</div>
</div>
<a id="a21ed740df778c0256356b6f1e0309a63" name="a21ed740df778c0256356b6f1e0309a63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21ed740df778c0256356b6f1e0309a63">&#9670;&nbsp;</a></span>outputMeta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void outputMeta </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structscanmeta.html">SCANMETA</a> *&#160;</td>
          <td class="paramname"><em>meta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Debug function that writes metadata to file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">meta</td><td>- internal metadata structure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa5182dab0f50920d99681c685690e2b3" name="aa5182dab0f50920d99681c685690e2b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5182dab0f50920d99681c685690e2b3">&#9670;&nbsp;</a></span>processData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int processData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="polarscan_8h.html#ab18af0ebcfc65c3148c7e8bee5455c57">PolarScan_t</a> *&#160;</td>
          <td class="paramname"><em>scan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structscanmeta.html">SCANMETA</a> *&#160;</td>
          <td class="paramname"><em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rave__list_8h.html#ad2ea2f1cc27c63aa76beb80b6535c3ef">RaveList_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds sun hits in reflectivity data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">scan</td><td>- polar scan object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">meta</td><td>- internal metadata structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">list</td><td>- RAVE list object containing hits </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 upon success, otherwise 0 </dd></dl>

</div>
</div>
<a id="a32a49eb2347cfc9100baaebd794d49ab" name="a32a49eb2347cfc9100baaebd794d49ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32a49eb2347cfc9100baaebd794d49ab">&#9670;&nbsp;</a></span>processScan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int processScan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="polarscan_8h.html#ab18af0ebcfc65c3148c7e8bee5455c57">PolarScan_t</a> *&#160;</td>
          <td class="paramname"><em>scan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structscanmeta.html">SCANMETA</a> *&#160;</td>
          <td class="paramname"><em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rave__list_8h.html#ad2ea2f1cc27c63aa76beb80b6535c3ef">RaveList_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function that calls processReflectivity for each of a number of given parameters/quantities. </p>
<p >Called internally by <a class="el" href="scansun_8h.html#acfc20bea77102fec923dae03d2e3d077">scansun</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">scan</td><td>- polar scan object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">meta</td><td>- internal metadata structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">list</td><td>- RAVE list object containing hits </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 upon success, otherwise 0 </dd></dl>

</div>
</div>
<a id="afc0fc55f583587489b2723224c055442" name="afc0fc55f583587489b2723224c055442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc0fc55f583587489b2723224c055442">&#9670;&nbsp;</a></span>readoutTiming()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void readoutTiming </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structscanmeta.html">SCANMETA</a> *&#160;</td>
          <td class="paramname"><em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ia</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>timer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines the exact observation times based on acquired readout times for each ray. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">meta</td><td>- internal metadata structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">the</td><td>index of the ray (azimuth), as an int </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">date</td><td>in the form YYYYMMDD as a long </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">time</td><td>in the form HHMMSS as a long </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sub-second</td><td>time (r="remainder") as a double </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a470b27523245f3e8871329cbe6564a2d" name="a470b27523245f3e8871329cbe6564a2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a470b27523245f3e8871329cbe6564a2d">&#9670;&nbsp;</a></span>refraction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double refraction </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>elev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function calculates the refraction correction of the solar position. </p>
<p >The function uses the true elevation, i.e., the calculated elevation of the sun in degrees. Formulas derived from the Equivalent Earth Model are used to calculated the refraction in degrees. (Holleman &amp; Huuskonen, 2013, Rad. Sci.) </p><dl class="section return"><dt>Returns</dt><dd>a double containing the value of the refracted (perceived) elevation angle in degrees. </dd></dl>

</div>
</div>
<a id="acfc20bea77102fec923dae03d2e3d077" name="acfc20bea77102fec923dae03d2e3d077"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfc20bea77102fec923dae03d2e3d077">&#9670;&nbsp;</a></span>scansun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int scansun </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rave__list_8h.html#ad2ea2f1cc27c63aa76beb80b6535c3ef">RaveList_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Masterminds the scanning of polar data and determination of sun hits. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>- string containing the name (and path if somewhere else) of the file to process </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">list</td><td>- RaveList_t object for holding one or more sets of return values </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">source</td><td>- string containing the value of /what/source </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 upon success, otherwise 0 </dd></dl>

</div>
</div>
<a id="acd3f204ec616efd7510934a65d357a50" name="acd3f204ec616efd7510934a65d357a50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd3f204ec616efd7510934a65d357a50">&#9670;&nbsp;</a></span>scansunFromObject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int scansunFromObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rave__object_8h.html#a46a2f0574ec46db3626c123be570c7ed">RaveCoreObject</a> *&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rave__types_8h.html#a9781de85deb77d68fc1a87c07220b716">Rave_ObjectType</a>&#160;</td>
          <td class="paramname"><em>ot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rave__list_8h.html#ad2ea2f1cc27c63aa76beb80b6535c3ef">RaveList_t</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Masterminds the scanning of polar data and determination of sun hits, from object in memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">object</td><td>- Polar scan or volume object in memory </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ot</td><td>- Object type identifier enum, preferably Rave_ObjectType_SCAN or Rave_ObjectType_PVOL </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">list</td><td>- RaveList_t object for holding one or more sets of return values </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">source</td><td>- string containing the value of /what/source </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 upon success, otherwise 0 </dd></dl>

</div>
</div>
<a id="a53ae63e812912af188f8622d33659bf6" name="a53ae63e812912af188f8622d33659bf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53ae63e812912af188f8622d33659bf6">&#9670;&nbsp;</a></span>solar_elev_azim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void solar_elev_azim </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>yyyymmdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>hhmmss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>elev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>azim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>relev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function calculates the solar elevation and azimuth using the geographical position, date, and time. </p>
<p >The equations and constants are taken from the WMO guide on Meteorological Instruments and Methods of Observations (CIMO, WMO no. 8), annex 7.D. The equations have been slightly modified and extended to include the calculation of both the sine and cosine of the azimuth. Modified slightly further to include the refracted (perceived) elevation angle. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lon</td><td>- double containing the longitude position </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lat</td><td>- double containing the latitude position </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">yyyymmdd</td><td>- year-month-day as a long </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hhmmss</td><td>- hour-minute-second as a long </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">elev</td><td>- elevation angle above the horizon in degrees, as a pointer to a double </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">azim</td><td>- azimuth angle clockwise from true north, as a pointer to a double </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">relev</td><td>- refracted elevation angle, based on elev, as a pointer to a double </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
