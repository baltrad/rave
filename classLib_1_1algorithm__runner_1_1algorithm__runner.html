<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RAVE: Lib.algorithm_runner.algorithm_runner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RAVE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Lib</b></li><li class="navelem"><b>algorithm_runner</b></li><li class="navelem"><a class="el" href="classLib_1_1algorithm__runner_1_1algorithm__runner.html">algorithm_runner</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classLib_1_1algorithm__runner_1_1algorithm__runner-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Lib.algorithm_runner.algorithm_runner Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Wrapper around the multiprocessing pool used for generating products Since we want to avoid processing old jobs before newer jobs we have to prioritize the jobs and make sure that we are not draining computer resources on irrelevant jobs.  
 <a href="classLib_1_1algorithm__runner_1_1algorithm__runner.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Lib.algorithm_runner.algorithm_runner:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classLib_1_1algorithm__runner_1_1algorithm__runner.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aec800c8cb598c7ab76ac5e59bad243f7"><td class="memItemLeft" align="right" valign="top"><a id="aec800c8cb598c7ab76ac5e59bad243f7" name="aec800c8cb598c7ab76ac5e59bad243f7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self, nrprocesses)</td></tr>
<tr class="separator:aec800c8cb598c7ab76ac5e59bad243f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af190568e10992b4bf4b3d01fd9411605"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLib_1_1algorithm__runner_1_1algorithm__runner.html#af190568e10992b4bf4b3d01fd9411605">add</a> (self, func, jobid, algorithm, files, arguments, jobdone=None)</td></tr>
<tr class="memdesc:af190568e10992b4bf4b3d01fd9411605"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds one job to be processed.  <br /></td></tr>
<tr class="separator:af190568e10992b4bf4b3d01fd9411605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a982b30f0f5cc1062439eb013b3998d5c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLib_1_1algorithm__runner_1_1algorithm__runner.html#a982b30f0f5cc1062439eb013b3998d5c">async_callback</a> (self, arg)</td></tr>
<tr class="memdesc:a982b30f0f5cc1062439eb013b3998d5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked by the async pool on answer.  <br /></td></tr>
<tr class="separator:a982b30f0f5cc1062439eb013b3998d5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b24eb80b21086ddc9d58611dd3a0382"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLib_1_1algorithm__runner_1_1algorithm__runner.html#a1b24eb80b21086ddc9d58611dd3a0382">join</a> (self)</td></tr>
<tr class="memdesc:a1b24eb80b21086ddc9d58611dd3a0382"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutsdown and waits for pool to terminate.  <br /></td></tr>
<tr class="separator:a1b24eb80b21086ddc9d58611dd3a0382"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0cbfc13c74f3c06bbb6e34a2b08b0ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLib_1_1algorithm__runner_1_1algorithm__runner.html#ab0cbfc13c74f3c06bbb6e34a2b08b0ae">terminate</a> (self)</td></tr>
<tr class="memdesc:ab0cbfc13c74f3c06bbb6e34a2b08b0ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates the pool.  <br /></td></tr>
<tr class="separator:ab0cbfc13c74f3c06bbb6e34a2b08b0ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a4d8f8f68483907984549eade7b50a2db"><td class="memItemLeft" align="right" valign="top"><a id="a4d8f8f68483907984549eade7b50a2db" name="a4d8f8f68483907984549eade7b50a2db"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>lock</b></td></tr>
<tr class="separator:a4d8f8f68483907984549eade7b50a2db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dddc4e1d690ca6bb23b9a0ab58a9875"><td class="memItemLeft" align="right" valign="top"><a id="a5dddc4e1d690ca6bb23b9a0ab58a9875" name="a5dddc4e1d690ca6bb23b9a0ab58a9875"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>queue</b></td></tr>
<tr class="separator:a5dddc4e1d690ca6bb23b9a0ab58a9875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eea4044acf7f923c5eea5172cd2c52c"><td class="memItemLeft" align="right" valign="top"><a id="a3eea4044acf7f923c5eea5172cd2c52c" name="a3eea4044acf7f923c5eea5172cd2c52c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>pool</b></td></tr>
<tr class="separator:a3eea4044acf7f923c5eea5172cd2c52c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a0b637bc67938c70926449f9317db7"><td class="memItemLeft" align="right" valign="top"><a id="a36a0b637bc67938c70926449f9317db7" name="a36a0b637bc67938c70926449f9317db7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>nrprocesses</b></td></tr>
<tr class="separator:a36a0b637bc67938c70926449f9317db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76f9e4ec15f2d98c2934acc164756c8b"><td class="memItemLeft" align="right" valign="top"><a id="a76f9e4ec15f2d98c2934acc164756c8b" name="a76f9e4ec15f2d98c2934acc164756c8b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>running_jobs</b></td></tr>
<tr class="separator:a76f9e4ec15f2d98c2934acc164756c8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:adb18c846bcf855b876bba358d4d2a94d"><td class="memItemLeft" align="right" valign="top"><a id="adb18c846bcf855b876bba358d4d2a94d" name="adb18c846bcf855b876bba358d4d2a94d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Process</b> = <a class="el" href="classLib_1_1rave__mppool_1_1NonDaemonProcess.html">NonDaemonProcess</a></td></tr>
<tr class="separator:adb18c846bcf855b876bba358d4d2a94d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a5d8c3370a775ec4649575770f826d998"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLib_1_1algorithm__runner_1_1algorithm__runner.html#a5d8c3370a775ec4649575770f826d998">_handle_queue</a> (self)</td></tr>
<tr class="memdesc:a5d8c3370a775ec4649575770f826d998"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs one job from the queue.  <br /></td></tr>
<tr class="separator:a5d8c3370a775ec4649575770f826d998"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Wrapper around the multiprocessing pool used for generating products Since we want to avoid processing old jobs before newer jobs we have to prioritize the jobs and make sure that we are not draining computer resources on irrelevant jobs. </p>
<p>Also, if a job with same algorithm_id, date and time is added when another job is in the queue, the queued job will be replaced with the new jobs jobid, arguments and files. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a5d8c3370a775ec4649575770f826d998" name="a5d8c3370a775ec4649575770f826d998"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d8c3370a775ec4649575770f826d998">&#9670;&#160;</a></span>_handle_queue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Lib.algorithm_runner.algorithm_runner._handle_queue </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Runs one job from the queue. </p>
<p>Synchronization must be performed before entering this method. Will increase running jobs with 1 if job added async to pool </p>

</div>
</div>
<a id="af190568e10992b4bf4b3d01fd9411605" name="af190568e10992b4bf4b3d01fd9411605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af190568e10992b4bf4b3d01fd9411605">&#9670;&#160;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Lib.algorithm_runner.algorithm_runner.add </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>jobid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>algorithm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>files</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arguments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>jobdone</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds one job to be processed. </p>
<p>If arguments contains an algorithm_id, the priority of this job will be increased. Also, if the arguments contains date &amp; time, this will also increase priority. If queue already contains an algorithm that is matching a previously added algorithm, its contant will be replaced (files and arguments).</p>
<p>To avoid duplicate jobs </p>

</div>
</div>
<a id="a982b30f0f5cc1062439eb013b3998d5c" name="a982b30f0f5cc1062439eb013b3998d5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a982b30f0f5cc1062439eb013b3998d5c">&#9670;&#160;</a></span>async_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Lib.algorithm_runner.algorithm_runner.async_callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoked by the async pool on answer. </p>

</div>
</div>
<a id="a1b24eb80b21086ddc9d58611dd3a0382" name="a1b24eb80b21086ddc9d58611dd3a0382"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b24eb80b21086ddc9d58611dd3a0382">&#9670;&#160;</a></span>join()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Lib.algorithm_runner.algorithm_runner.join </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutsdown and waits for pool to terminate. </p>

</div>
</div>
<a id="ab0cbfc13c74f3c06bbb6e34a2b08b0ae" name="ab0cbfc13c74f3c06bbb6e34a2b08b0ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0cbfc13c74f3c06bbb6e34a2b08b0ae">&#9670;&#160;</a></span>terminate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Lib.algorithm_runner.algorithm_runner.terminate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Terminates the pool. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/github/workspace/Lib/algorithm_runner.py</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
